<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exam Session Comparison - The Physiology of Test Anxiety</title>
    <!-- Dynamic base tag that works both locally and on GitHub Pages -->
    <script>
      // Determine if we're on GitHub Pages or local
      (function () {
        var isGitHubPages = window.location.hostname.includes("github.io");
        var basePath = isGitHubPages ? "/exam-stress-visualization/" : "/";
        document.write('<base href="' + basePath + '" />');
      })();
    </script>
    <link rel="stylesheet" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      /* Additional styles specific to this visualization */
      .control-panel {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 20px;
        padding: 15px;
        background-color: #f5f5f5;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .control-group {
        display: flex;
        flex-direction: column;
        min-width: 200px;
      }

      .control-group label {
        margin-bottom: 5px;
        font-weight: bold;
      }

      .visualization-container {
        width: 100%;
        height: 500px;
        background-color: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 20px;
        margin-bottom: 20px;
      }

      .tooltip {
        position: absolute;
        padding: 10px;
        background-color: rgba(255, 255, 255, 0.9);
        border: 1px solid #ddd;
        border-radius: 4px;
        pointer-events: none;
        font-size: 12px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .box {
        fill: #7eb0d5;
        fill-opacity: 0.7;
        stroke: #2c7fb8;
        stroke-width: 1.5;
      }

      .whisker {
        stroke: #2c7fb8;
        stroke-width: 1.5;
      }

      .median {
        stroke: #e34a33;
        stroke-width: 2;
      }

      .outlier {
        fill: #e34a33;
        stroke: #e34a33;
        stroke-width: 1;
      }

      .axis-label {
        font-size: 14px;
        font-weight: bold;
      }

      .loading {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100%;
        font-size: 18px;
        color: #666;
      }

      .time-range-container {
        width: 100%;
        padding: 15px;
        background-color: #f5f5f5;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .time-range-slider {
        width: 100%;
        margin: 10px 0;
      }

      .time-display {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
      }

      .axis text {
        font-size: 12px;
      }

      .axis path,
      .axis line {
        stroke: #ccc;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>The Physiology of Test Anxiety</h1>
      <p>
        An explorable explanation of how our bodies respond during high-stakes
        exams
      </p>
    </header>

    <nav class="visualization-nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="body-map.html">Body Map</a></li>
        <li><a href="timeline.html">Timeline</a></li>
        <li><a href="comparison.html">Student Comparison</a></li>
        <li><a href="recovery.html">Recovery Patterns</a></li>
        <li>
          <a href="exam-comparison.html" class="active">Exam Comparison</a>
        </li>
      </ul>
    </nav>

    <main>
      <section>
        <h2>Exam Session Comparison</h2>
        <p>
          Compare how physiological signals vary across different exam sessions
          (Midterm 1, Midterm 2, and Final). The box plots show the distribution
          of values, with the box representing the interquartile range (25th to
          75th percentile), the line in the middle showing the median, and the
          whiskers extending to the minimum and maximum values within 1.5 times
          the IQR. Points outside the whiskers represent outliers.
        </p>

        <div class="control-panel">
          <div class="control-group">
            <label for="metric-selector">Physiological Signal:</label>
            <select id="metric-selector">
              <option value="HR">Heart Rate (BPM)</option>
              <option value="EDA">Electrodermal Activity (μS)</option>
              <option value="TEMP">Temperature (°C)</option>
              <option value="BVP">Blood Volume Pulse</option>
              <option value="IBI">Inter-Beat Interval (ms)</option>
            </select>
          </div>
        </div>

        <div class="time-range-container">
          <label for="time-range">Time Range (minutes from start):</label>
          <div class="time-display">
            <span id="min-time">0</span>
            <span id="max-time">90</span>
          </div>
          <input
            type="range"
            id="time-range"
            class="time-range-slider"
            min="0"
            max="180"
            value="180"
            step="5"
          />
          <div class="time-display">
            <span
              >Selected range:
              <span id="time-range-value">0 - 180</span> minutes</span
            >
          </div>
        </div>

        <div id="visualization-container" class="visualization-container">
          <div class="loading">Loading data...</div>
        </div>
      </section>
    </main>

    <footer>
      <p>Created for Data Visualization Final Project</p>
    </footer>

    <!-- Use a separate JS file for this visualization -->
    <script src="boxplot-comparison.js"></script>
  </body>
</html>
