<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Physiology of Test Anxiety</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
  </head>
  <body>
    <header class="transparent-header">
      <h1>The Physiology of Test Anxiety</h1>
      <p>
        An explorable explanation of how our bodies respond during high-stakes
        exams
      </p>
    </header>

    <div class="scrollytelling-container">
      <section class="scroll-section" id="intro">
        <div class="content-container">
          <h2>This is a student taking an exam.</h2>
          <p>We'll call her Emma. It's her midterm, and her heart is racing.</p>
          <p>
            Her palms are sweaty. Her breathing is rapid. Her mind is racing.
          </p>
          <p>
            <strong>This is the physiology of test anxiety.</strong>
          </p>
        </div>
        <div class="visual-container">
          <div class="student-silhouette">
            <svg viewBox="0 0 100 150" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M50,20 C60,20 70,30 70,40 C70,50 60,60 50,60 C40,60 30,50 30,40 C30,30 40,20 50,20 Z"
                fill="#ddd"
              />
              <path
                d="M50,60 L50,100 M30,70 L70,70 M20,140 L40,100 M80,140 L60,100"
                stroke="#222"
                stroke-width="2"
                fill="none"
              />
            </svg>
            <div class="heart-pulse"></div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="stress-intro">
        <div class="content-container">
          <h2>Stress affects the entire body</h2>
          <p>
            When we're anxious during exams, our bodies undergo measurable
            physiological changes - from our skin to our heart to our brain.
          </p>
          <p>
            These changes can affect our performance, focus, and ability to
            think clearly.
          </p>
        </div>
        <div class="visual-container">
          <div class="metrics-grid">
            <div class="metric-icon">
              <span class="icon">‚ù§Ô∏è</span>
              <span class="label">Heart Rate</span>
            </div>
            <div class="metric-icon">
              <span class="icon">üíß</span>
              <span class="label">Electrodermal Activity</span>
            </div>
            <div class="metric-icon">
              <span class="icon">üîÑ</span>
              <span class="label">Blood Volume Pulse</span>
            </div>
            <div class="metric-icon">
              <span class="icon">üå°Ô∏è</span>
              <span class="label">Skin Temperature</span>
            </div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="heart-rate">
        <div class="content-container">
          <h2>Heart Rate</h2>
          <p>
            During exams, a student's heart rate can increase by 20-40 beats per
            minute above their resting rate.
          </p>
          <p>
            This increase can last for extended periods, contributing to
            feelings of tension and reduced cognitive performance.
          </p>
        </div>
        <div class="visual-container">
          <div class="metric-visualization">
            <div class="hr-graph">
              <div class="graph-bar" style="height: 30%">
                <span>Resting</span>
              </div>
              <div class="graph-bar highlighted" style="height: 80%">
                <span>Exam</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="skin-response">
        <div class="content-container">
          <h2>Electrodermal Activity (EDA)</h2>
          <p>
            EDA measures tiny changes in sweat gland activity. When we're
            stressed, these glands become more active.
          </p>
          <p>
            This is why your palms get sweaty during a difficult test - a direct
            measurement of your sympathetic nervous system's "fight or flight"
            response.
          </p>
        </div>
        <div class="visual-container">
          <div class="eda-visualization">
            <div class="sweat-animation"></div>
            <div class="eda-reading">
              <span class="baseline">Baseline</span>
              <span class="line"></span>
              <span class="stressed">Stressed</span>
            </div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="temperature">
        <div class="content-container">
          <h2>Body Temperature Changes</h2>
          <p>
            During stress, blood flow redistributes in our body. Extremities
            like hands may become cooler as blood is directed to major muscle
            groups.
          </p>
          <p>
            This can be measured as subtle changes in skin temperature - another
            window into our body's stress response.
          </p>
        </div>
        <div class="visual-container">
          <div class="temp-visualization">
            <div class="body-heat-map">
              <div class="gradient"></div>
              <div class="labels">
                <span>Cooler</span>
                <span>Warmer</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="recovery">
        <div class="content-container">
          <h2>Recovery Patterns</h2>
          <p>
            Not all students respond to stress in the same way. Some recover
            quickly after a stressful moment, while others take longer to return
            to baseline.
          </p>
          <p>
            These recovery patterns can predict academic performance and
            well-being.
          </p>
        </div>
        <div class="visual-container">
          <div class="recovery-visualization">
            <div class="recovery-chart">
              <div class="recovery-line fast">
                <span class="label">Fast Recovery</span>
              </div>
              <div class="recovery-line slow">
                <span class="label">Slow Recovery</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="scroll-section" id="explore-intro">
        <div class="content-container">
          <h2>Explore the data yourself</h2>
          <p>
            We've collected physiological data from 10 students across three
            different exams.
          </p>
          <p>
            Choose a visualization method below to begin exploring how their
            bodies responded to academic stress.
          </p>
          <div class="scroll-indicator">
            <span>Scroll to continue</span>
            <div class="arrow-down"></div>
          </div>
        </div>
      </section>
    </div>

    <main id="landing-page">
      <section id="welcome">
        <h2>Welcome to the Exam Stress Visualization</h2>
        <p>
          This interactive tool allows you to explore how our bodies respond to
          academic stress during exams. We've collected physiological data from
          10 students using wearable devices during three different exam
          sessions. Choose a visualization method below to begin exploring the
          data.
        </p>
      </section>

      <section id="visualization-selector">
        <div class="viz-grid">
          <div class="viz-card" id="body-map-card">
            <div class="viz-icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/3209/3209114.png"
                alt="Body Map Icon"
              />
            </div>
            <div class="viz-info">
              <h3>Body Map</h3>
              <p>
                Explore how different parts of the body respond to exam stress
                by interacting with an anatomical visualization.
              </p>
              <a href="body-map.html" class="viz-button">Explore Body Map</a>
            </div>
          </div>

          <div class="viz-card" id="timeline-card">
            <div class="viz-icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/4789/4789928.png"
                alt="Timeline Icon"
              />
            </div>
            <div class="viz-info">
              <h3>Timeline Explorer</h3>
              <p>
                See how physiological responses change throughout the duration
                of an exam with interactive timelines.
              </p>
              <a href="timeline.html" class="viz-button">Explore Timeline</a>
            </div>
          </div>

          <div class="viz-card" id="comparison-card">
            <div class="viz-icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/3094/3094851.png"
                alt="Comparison Icon"
              />
            </div>
            <div class="viz-info">
              <h3>Student Comparison</h3>
              <p>
                Compare physiological responses between students with different
                performance levels.
              </p>
              <a href="comparison.html" class="viz-button"
                >Explore Comparison</a
              >
            </div>
          </div>

          <div class="viz-card" id="recovery-card">
            <div class="viz-icon">
              <img
                src="https://cdn-icons-png.flaticon.com/512/2966/2966488.png"
                alt="Recovery Icon"
              />
            </div>
            <div class="viz-info">
              <h3>Stress Recovery Patterns</h3>
              <p>
                Analyze how quickly students recover from physiological stress
                spikes during exams.
              </p>
              <a href="recovery.html" class="viz-button">Explore Recovery</a>
            </div>
          </div>
        </div>
      </section>

      <section id="about-data">
        <h2>About the Data</h2>
        <p>
          This visualization uses physiological data collected from 10 students
          during exams using the Empatica E4 wearable device, which measures:
        </p>
        <ul>
          <li>
            <strong>Electrodermal Activity (EDA)</strong>: Skin conductance
            measured in microsiemens (ŒºS), indicating sympathetic nervous system
            arousal
          </li>
          <li>
            <strong>Heart Rate (HR)</strong>: Beats per minute (BPM) calculated
            from the blood volume pulse signal
          </li>
          <li>
            <strong>Blood Volume Pulse (BVP)</strong>: Changes in blood volume
            with each heartbeat
          </li>
          <li>
            <strong>Skin Temperature (TEMP)</strong>: Measured in degrees
            Celsius (¬∞C)
          </li>
          <li>
            <strong>Inter-Beat Interval (IBI)</strong>: Time between heartbeats
            in seconds (s)
          </li>
          <li>
            <strong>Accelerometer Data (ACC)</strong>: Movement measured in
            g-force (1/64g units)
          </li>
        </ul>
        <p>
          All midterm exams lasted 1.5 hours while the final exam was 3 hours
          long. All exams started at 9:00 AM.
        </p>
      </section>
    </main>

    <footer>
      <p>Created for Data Visualization Final Project</p>
    </footer>

    <script src="script.js"></script>
    <script>
      // Enhanced scrollytelling script
      document.addEventListener("DOMContentLoaded", function () {
        const sections = document.querySelectorAll(".scroll-section");
        const header = document.querySelector(".transparent-header");

        // Set initial states
        sections.forEach((section, index) => {
          if (index === 0) {
            section.classList.add("active");
          }
        });

        // Helper function to check if element is in viewport
        function isInViewport(element, offset = 0.8) {
          const rect = element.getBoundingClientRect();
          return rect.top <= window.innerHeight * offset && rect.bottom >= 0;
        }

        // Helper function to calculate scroll progress
        function getScrollProgress(element) {
          const rect = element.getBoundingClientRect();
          const windowHeight = window.innerHeight;

          // Calculate how far the element is through the viewport
          let progress =
            1 - (rect.top + rect.height) / (windowHeight + rect.height);

          // Clamp between 0 and 1
          return Math.min(Math.max(progress, 0), 1);
        }

        // Update scroll position for parallax and scroll-based animations
        function updateOnScroll() {
          sections.forEach((section) => {
            // Add active class when section is in viewport
            if (isInViewport(section)) {
              section.classList.add("active");

              // Get scroll progress for this section
              const progress = getScrollProgress(section);

              // Apply parallax effect to visual elements based on scroll progress
              const visual = section.querySelector(".visual-container");
              if (visual) {
                visual.style.transform = `translateY(${progress * -30}px)`;
              }
            } else {
              // Optional: remove active class when section leaves viewport
              // section.classList.remove("active");
            }
          });

          // Make header more transparent on scroll
          const scrollY = window.scrollY;
          if (scrollY > 100) {
            header.style.backgroundColor = "rgba(255, 255, 255, 0.9)";
          } else {
            header.style.backgroundColor =
              "rgba(255, 255, 255, " + (0.6 + scrollY / 250) + ")";
          }
        }

        // Check scroll position on load
        updateOnScroll();

        // Update on scroll
        window.addEventListener("scroll", updateOnScroll);

        // Smooth scroll for arrow down
        const scrollArrow = document.querySelector(".arrow-down");
        if (scrollArrow) {
          scrollArrow.addEventListener("click", function () {
            window.scrollBy({
              top: window.innerHeight,
              behavior: "smooth",
            });
          });
        }
      });
    </script>
  </body>
</html>
